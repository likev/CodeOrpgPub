XCOMM RCS info 
XCOMM $Author: steves $ 
XCOMM $Locker:  $ 
XCOMM $Date: 2009/02/24 19:01:38 $ 
XCOMM $Id: a314buf.inc,v 1.4 2009/02/24 19:01:38 steves Exp $ 
XCOMM $Revision: 1.4 $ 
XCOMM $State: Exp $ 
*.*******************************************************************
*.
*.           I N C L U D E    F I L E    P R O L O G U E
*.
*.  INCLUDE FILE NAME: A314BUF.INC
*.
*.  INCLUDE FILE VERSION: 01
*.
*.  INCLUDE FILE LANGUAGE: FORTRAN
*.
*.  CHANGE HISTORY:
*.
*.  DATE         RV   SPR#      PROGRAMMER         NOTES
*.  ---------    --   -----     ----------------   -----------------
*.  02 25 97     00             Steven D. Smith
*.  04 21 99     01  NA96-17803 Mike Istok         **A3148C1,**A3148P3
*.
*.*******************************************************************
**A3148P1

C
C** Adaptation Data offsets.
C

      INTEGER*4 AD_MINDBZ
      INTEGER*4 AD_ALTLIM1
      INTEGER*4 AD_ALTLIM2
      INTEGER*4 AD_DISLIM1
      INTEGER*4 AD_DISLIM2
      INTEGER*4 AD_DISLIM3
      INTEGER*4 AD_ELVLIM1
      INTEGER*4 AD_ELVLIM2
      INTEGER*4 AD_REJVEL
      INTEGER*4 AD_REJWID
      INTEGER*4 AD_ACPTVEL
      INTEGER*4 AD_ACPTWID
      INTEGER*4 AD_RNGGATE
      INTEGER*4 AD_DBZDIFF
      INTEGER*4 AD_IFEXTND
      INTEGER*4 AD_IFMEDIAN
      INTEGER*4 AD_RNGMEDIAN
      INTEGER*4 AD_CRMEDIAN
      INTEGER*4 AD_PGDMEDIAN


      PARAMETER ( AD_MINDBZ = 1 )
      PARAMETER ( AD_ALTLIM1 = 2 )
      PARAMETER ( AD_ALTLIM2 = 3 )
      PARAMETER ( AD_DISLIM1 = 4 )
      PARAMETER ( AD_DISLIM2 = 5 )
      PARAMETER ( AD_DISLIM3 = 6 )
      PARAMETER ( AD_ELVLIM1 = 7 )
      PARAMETER ( AD_ELVLIM2 = 8 )
      PARAMETER ( AD_REJVEL = 9 )
      PARAMETER ( AD_REJWID = 10 )
      PARAMETER ( AD_ACPTVEL = 11 )
      PARAMETER ( AD_ACPTWID = 12 )
      PARAMETER ( AD_RNGGATE = 13 )
      PARAMETER ( AD_DBZDIFF = 14 )
      PARAMETER ( AD_IFEXTND = 15 )
      PARAMETER ( AD_IFMEDIAN = 16 )
      PARAMETER ( AD_RNGMEDIAN = 17 )
      PARAMETER ( AD_CRMEDIAN = 18 )
      PARAMETER ( AD_PGDMEDIAN = 19 )

      INTEGER*4 ADAPT_SIZE
      PARAMETER ( ADAPT_SIZE = 19 )

/*

**A3148P2

      INTEGER*4 OMIT_ALL
      PARAMETER( OMIT_ALL = 1 )

      INTEGER*4 ACCEPT_IF
      PARAMETER ( ACCEPT_IF = 2 )

      INTEGER*4 REJECT_IF
      PARAMETER( REJECT_IF = 3 )

      INTEGER*4 ACCEPT_ALL
      PARAMETER( ACCEPT_ALL = 4 )

      INTEGER*4 BEG_RNG
      PARAMETER( BEG_RNG = 1 )

      INTEGER*4 END_RNG
      PARAMETER( END_RNG = 2 )

/*

**A3148C1
C
C** Adaptation data
C
      INTEGER*4 ADMINDBZ_L
      INTEGER*4 ADALTLIM1_L
      INTEGER*4 ADALTLIM2_L
      INTEGER*4 ADDISLIM1_L
      INTEGER*4 ADDISLIM2_L
      INTEGER*4 ADDISLIM3_L
      REAL      ADELVLIM1_L
      REAL      ADELVLIM2_L
      REAL      ADREJVEL_L
      INTEGER*4 ADREJWID_L
      REAL      ADACPTVEL_L
      INTEGER*4 ADACPTWID_L
      INTEGER*4 ADRNGGATE_L
      INTEGER*4 ADDBZDIFF_L
      LOGICAL   ADIFEXTND_L
      LOGICAL   ADIFMEDIAN_L
      INTEGER*4 ADRNGMEDIAN_L
      INTEGER*4 ADCRMEDIAN_L
      REAL      ADPGDMEDIAN_L
C
C** Derived Adaptation data
C
      INTEGER*4 REJECT_LOW_VEL
      INTEGER*4 REJECT_HIGH_VEL
      INTEGER*4 ACCEPT_LOW_VEL
      INTEGER*4 ACCEPT_HIGH_VEL
      INTEGER*4 MAX_PRODUCT_RANGE, MAX_RADS


      COMMON/ A3148C1 /  ADMINDBZ_L, ADALTLIM1_L, ADALTLIM2_L
      COMMON/ A3148C1 /  ADDISLIM1_L, ADDISLIM2_L, ADDISLIM3_L
      COMMON/ A3148C1 /  ADELVLIM1_L, ADELVLIM2_L, ADREJVEL_L
      COMMON/ A3148C1 /  ADREJWID_L, ADACPTVEL_L,  ADACPTWID_L
      COMMON/ A3148C1 /  ADRNGGATE_L, ADDBZDIFF_L, ADIFEXTND_L
      COMMON/ A3148C1 /  ADIFMEDIAN_L, ADRNGMEDIAN_L, ADCRMEDIAN_L
      COMMON/ A3148C1 /  ADPGDMEDIAN_L, REJECT_LOW_VEL
      COMMON/ A3148C1 /  REJECT_HIGH_VEL, ACCEPT_LOW_VEL
      COMMON/ A3148C1 /  ACCEPT_HIGH_VEL
      COMMON/ A3148C1 /  MAX_PRODUCT_RANGE, MAX_RADS

/*

**A3148P3
C
C  LAYER COMPOSITITE POLAR-GRID BUFFER:
C
      INTEGER*4 APR_NRADS, RANGE, MAX_APR_RANGE, MAX_ALGO_RANGE
      INTEGER*4 PGRID, CALIB, LHGT
      PARAMETER( RANGE = 230, APR_NRADS = 360, MAX_ALGO_RANGE=460 )
      PARAMETER( PGRID = 3, CALIB = 0, LHGT = 1 )
      PARAMETER( MAX_APR_RANGE = RANGE/0.7071 )
/*

**A3148C3
C
C  LAYER COMPOSITE POLAR-GRID MAPPING PARAMETERS
C
      INTEGER*4 DOP_BINS_PER_REF_BIN
      PARAMETER( DOP_BINS_PER_REF_BIN = 4 )

      INTEGER*4 MAX_PROC_BINS
      PARAMETER( MAX_PROC_BINS = 920)

      INTEGER*4 MISSING_FLAG, CLUTTER_FLAG
      PARAMETER( MISSING_FLAG = 0, CLUTTER_FLAG = 1 )

      INTEGER   SCFACT
      PARAMETER( SCFACT = 2.**16 )

      INTEGER*4 START_RBIN, REGION_START_BIN, REGION_END_BIN
      INTEGER*4 LAST_RAD, PREV_RAD, DELTABIN, MAX_DOPBIN
      INTEGER*4 FST_CLUT_BIN
      LOGICAL   BEGVSCAN, ENDVSCAN
      COMMON/ A3148C3 / START_RBIN, REGION_START_BIN, REGION_END_BIN
      COMMON/ A3148C3 / LAST_RAD, PREV_RAD, DELTABIN, BEGVSCAN
      COMMON/ A3148C3 / ENDVSCAN, MAX_DOPBIN, FST_CLUT_BIN
/*

**A3148P4
C
C  LAYER COMPOSITE CARTESIAN-GRID MAPPING PARAMETERS
C
      INTEGER*4 NCOLS, NROWS, BOXWDTH, BOXHGHT, HALFCOL, HALFROW
      INTEGER*4 SCALEFAC, CONSTWD, CONSTHT
      PARAMETER( BOXWDTH = 4, BOXHGHT = 4, SCALEFAC = 65536 )
      PARAMETER( NCOLS = ((RANGE + (BOXWDTH-1))/BOXWDTH)*2 )
      PARAMETER( NROWS = ((RANGE + (BOXHGHT-1))/BOXHGHT)*2 )
      PARAMETER( HALFCOL = NCOLS/2, HALFROW = NROWS/2 )
      PARAMETER( CONSTWD = (1.0/BOXWDTH)*SCALEFAC )
      PARAMETER( CONSTHT = (1.0/BOXHGHT)*SCALEFAC )
/*

/*
**A314P9
*VERSION: 1
C********************************************************************
C  PARAMETERS FILE FOR COMPOSITE REFLECTIVITY CARTESIAN GRID
C  SCRATCH BUFFER HEADER:
C
C  NOTE: THE HEADER IS WRITTEN IN I*4 WORDS!!!
C
C    CHDR        - OFFSET TO CARTESIAN GRID BUFFER HEADER
C    CGRID       - OFFSET TO 1ST WORD OF CARTESIAN GRID
C    HDRLNG      - NUMBER OF I*4 WORDS IN HEADER
C
C    GRID_COL -    INDEX OF NUMBER OF COLUMNS IN GRID
C    GRID_ROW -    INDEX OF NUMBER OF ROWS IN GRID
C    GRID_RES -    INDEX OF GRID RESOLUTION
C    GRID_MAXVAL - INDEX OF MAXIMUM DATA VALUE
C    GRID_MAXI   - INDEX OF I COORDINATE OF LATEST MAXVAL
C    GRID_MAXJ   - INDEX OF J COORDINATE OF LATEST MAXVAL
C    VS_NUM      - INDEX OF VOLUME-SCAN NUMBER
C    VS_DAT      - INDEX OF VOLUME-SCAN DATE
C    VS_TIM      - INDEX OF VOLUME-SCAN TIME
C    GRID_CALCON - CALIBRATION CONSTANT IN ONE I*4 WORD
C
C    CGRIDHDR    - ARRAY CONTAINING GRID-BUFFER HEADER
C
C********************************************************************
C
      INTEGER CHDR, CGRID, HDRLNG
      INTEGER GRID_COL, GRID_ROW, GRID_RES
      INTEGER GRID_MAXVAL, GRID_MAXI, GRID_MAXJ
      INTEGER VS_NUM, VS_DAT, VS_TIM, GRID_CALCON
C
      PARAMETER (CHDR=0, CGRID=10, HDRLNG=10)
      PARAMETER (GRID_COL=1, GRID_ROW=2, GRID_RES=3)
      PARAMETER (GRID_MAXVAL=4, GRID_MAXI=5, GRID_MAXJ=6)
      PARAMETER (VS_NUM=7, VS_DAT=8, VS_TIM=9)
      PARAMETER (GRID_CALCON=10)
C
/*
**A307D9
*VERSION: 1
      INTEGER CGRIDHDR(HDRLNG)
C
C    THE CARTESIAN GRID ('CARTGRID') IS DIMENSIONED BY '(NBOX,NBOX)'
C    THE SIZE OF 'NBOX' DEPENDS ON THE GRID SIZE & RESOLUTION.
C    USUALLY 'NBOX' WILL BE PASSED INTO THE SUBROUTINE FROM A
C    PRODUCTION CONTROL ROUTINE.
C    (I.E. INTEGER*2 CARTGRID(NBOX,NBOX)
/*
