rms_interface(1)               ORPG SUM Manpage                   rms_interface(1)

NAME
rms_interface - FAA Remote Monitoring and Maintenance System interface

SYNOPSIS
rms_interface

DESCRIPTION The interface allows ORPG to read messages from FAA/RMMS and perform
functions based on those messages.  It also sends Status, Alarm, and RPG State
messages on command and on the minute update.

OPTIONS
	-p  This option sets the com port for the out going
	     messages. (example:  -p  /dev/ttyb)

OVERVIEW  The ORPG RMS interface is used to communicate with the FAA Remote
Monitoring and Maintenance System and provides for the passage of commands
and  status messages between the two systems.  The main design document is
the Interface Control Document For The RPG/RMS (document number 2620000).

When rms_interface is invoked it initializes the system by creating the
required linear buffers and registering alarms and events.  When the
interface is shut down it will remove the linear buffers and deregister
all alarms and events. All housekeeping for the interface is internal.

LINEAR BUFFERS:

RMS_INPUT_BUFFER - Messages coming into the ORPG are placed in this linear
buffer by the port manager.

RMS_OUTPUT_BUFFER - Messages sent from ORPG are placed in this linear buffer so
the port manager can read them.

RMS_LE_BUFFER - Linear buffer for log error messages.

RMS_TEXT_BUFFER - Free text messages generated by the hci are placed in
this linear buffer for access by the interface.

RMS_RESEND_BUFFER - Messages sent to the FAA/RMMS are temporarily stored
in this linear buffer until an acknowledgement message is received.

RMS_STATUS_LOG_BUFFER - If the interface is down all status log messages are
stored in this linear buffer so they can be sent to the FAA/RMMS when the
interface is restored.  Maximum number of messages is 1500.

RMS_STATUS_BUFFER - This linear buffer stores the current RMS interface settings
so they can be restored when the interface returns from a down condition. It is
currently used to store edit lock information.

MALRMS:

MALRM_SEND_STATUS_MSG - This timer sends a status message to the FAA/RMMS
every 60 seconds.
(rms_send_status.c)

MALRM_SEND_STATE_MSG - This timer sends an RPG state message to the FAA/RMMS
every 60 seconds.
(rms_rpg_state.c)

MALRM_SEND_ALARM_MSG - This timer sends an ORPG alarm message to the FAA/RMMS
every 60 seconds.
(rms_alarm_msg.c)

MALRM_CHECK_RESEND - This timer checks the resend linear buffer every 20 seconds
to see if any ORPG messages sent to FAA/RMMS have not received an acknowledgment.
If a message has not received an acknowledgment the check resend routine will
resend the message.
(rms_check_resend.c)

MALRM_SEND_RMS_UP - This timer is set only when the interface is down.  It sends
an RMS_UP message every 10 seconds  until an acknowledgement is received from
the FAA/RMMS indicating the interface is up.
(rms_up.c)

EVENTS:

ORPGEVT_RMS_MSG_RECEIVED - This event is posted by the port manager. The
callback routine reads the input linear buffer, strips the header, and sends it
to the proper handler.
(rms_handle_msg.c)

ORPGEVT_RDA_ALARMS_UPDATE - This event sends an ORPG alarm message to the FAA/RMMS
when a system alarm occurs.
(rms_alarm_msg.c)

ORPGEVT_RPG_STATUS_CHANGE - This event sends a status message to the FAA/RMMS
when a system status changes.
(rms_send_status_msg.c)

ORPGEVT_RMS_SEND_MSG - This event is posted by the interface. The callback
routine reads the output linear buffer and sends it to FAA/RMMS.
(rms_ptmgr.c)

ORPGEVT_RMS_INHIBIT_MSG - This event is posted by hci.  The callback routine
sends the inhibit time to the interface which sends it to FAA/RMMS.
(rms_inhibit.c)

ORPGEVT_RMS_TEXT_MSG - This event is posted by hci.  The callback routine reads
the message from the text linear buffer and sends it to FAA/RMMS.
(rms_send_free_text.c)

MESSAGES (ICD #2620000):

(1)  RPG STATE MESSAGE (ORPG to FAA/RMMS) - The ORPG state message is
transmitted from the ORPG to the FAA/RMMS immediately following a change in
state of the ORPG computer and once every minute.  The state message consists of
the ORPG status halfword indicating the ORPG is in restart, operate, stand-by,
shutdown, or test mode.
(rms_rpg_state.c)

(2)  RPG STATUS MESSAGE (ORPG to FAA/RMMS) - The status message transmitted from
the ORPG to the FAA/RMMS is comprised of RDA status data, ORPG status data,
Communications line status data, and PUP status data.  Complete status data will
be sent to the FAA/RMMS every minute.
(rms_send_status.c)

(3)  ALARM MESSAGE (ORPG to FAA/RMMS) - The alarm message is transmitted from
the ORPG to the FAA/RMMS upon the occurrence of task alarms in the ORPG, the
wideband connection, and as received from the RDA or once every minute. The RDA
alarms consist of an alarm summery halfword and the alarm message codes.
(rms_alarm_msg.c)

(4)  RDA STATE COMMAND (FAA/RMMS to ORPG) - Command to change the state of the RDA.
(rms_rda_state.c)

(5)  RDA CHANNEL CONTROL COMMAND (FAA/RMMS to ORPG) - Changes the RDA channel
from controlling to non-controlling.
(rms_rda_channel.c)

(6)  CHANGE RDA OPERATING MODE COMMAND (FAA/RMMS to ORPG) - Changes RDA
operating mode between operational and maintenance.
(rms_rda_mode.c)

(7)  ARCHIVE II CONTROL (RECORD) COMMAND (FAA/RMMS to ORPG) - Starts and stops
recording also sends number of volume scans to record.
(rms_arch.c)

(8)  RPG CONTROL COMMAND MESSAGE (FAA/RMMS to ORPG) - Changes the mode of the ORPG.
(rms_rpg_control.c)

(9)  FORCE ADAPTATION DATA UPDATE COMMAND (FAA/RMMS to ORPG) - Updates the
adaptation data to the redundant RDA.
(rms_force_adaptation_msg.c)

(10) NARROWBAND INTERFACE COMMAND (FAA/RMMS to ORPG) - Connects or disconnects
narrowband lines.  Can be single line or a range of lines.
(rms_narrowband_interface.c )

(11) WIDEBAND INTERFACE COMMAND (FAA/RMMS to ORPG) - Connects or disconnects the
wideband line.  Also sends line number.
(rms_wb.c)

(12) WIDEBAND LOOP TEST COMMAND (FAA/RMMS to ORPG) - Start or stop wideband
loopback test. Also sends duration of test in msec.
(rms_loopback_msg.c)

(13) DISPLAY FREE TEXT MESSAGE COMMAND (ORPG to FAA/RMMS) - Sends free text
message up to 400 characters.
(rms_send_free_text.c)

(14) SEND FREE TEXT MESSAGE COMMAND (FAA/RMMS to ORPG) - Sends free text message
up to 400 characters.  Also sends list of users to receive the message.
(rms_rec_free_text.c)

(15) EDIT ASSOCIATED PUPS IDS/COMMLINE ASSIGNMENTS (FAA/RMMS to ORPG) - Request
current PUP id for line number sent in message.
(rms_edit_pup_id.c)

(16) ASSOCIATED PUPS IDS/COMMLINE ASSIGNMENTS (ORPG to FAA/RMMS) - Sends PUP id
for requested line number.
(rms_edit_pup_id.c)

(17) DOWNLOAD ASSOCIATED PUPS IDS/COMMLINE ASSIGNMENTS (FAA/RMMS to ORPG) -
Sends edited PUP id. Edited PUP id is placed into ORPG system.
(rms_download_pup_id.c)

(18) EDIT CLUTTER SUPPRESSION REGIONS (FAA/RMMS to ORPG) - Request current
clutter suppression regions for file number sent in message.
(rms_edit_clutter.c)

(19) CLUTTER SUPPRESSION REGIONS (ORPG to FAA/RMMS) - Sends current clutter
suppression regions for requested file number.
(rms_edit_clutter.c)

(20) DOWNLOAD CLUTTER SUPPRESSION REGIONS (FAA/RMMS to ORPG) - Sends edited
clutter suppression regions. Edited clutter suppression regions are placed into
the ORPG system.
(rms_download_clutter.c)

(21) EDIT CLUTTER FILTER BYPASS MAPS (FAA/RMMS to ORPG) - Request current
clutter filter bypass maps. Can request all maps or by segment and radial.
(rms_edit_bypass_map.c)

(22) CLUTTER FILTER BYPASS MAPS (ORPG to FAA/RMMS) - Sends current clutter
filter bypass maps.
(rms_edit_bypass_map.c)

(23) DOWNLOAD CLUTTER FILTER BYPASS MAPS (FAA/RMMS to ORPG) - Sends edited
clutter filter bypass maps. Edited maps are placed into ORPG system.
(rms_download_bypass_map.c)

(24) EDIT LOAD SHED CATEGORIES (FAA/RMMS to ORPG) - Request current load shed
utilization percentages for warning and alarm levels.
(rms_edit_load_shed.c)

(25) LOAD SHED CATEGORIES (ORPG to FAA/RMMS) - Sends current load shed
utilization percentages for warning and alarm levels.
(rms_edit_load_shed.c)

(26) DOWNLOAD LOAD SHED CATEGORIES (FAA/RMMS to ORPG) - Sends edited load shed
utilization percentages for warning and alarm levels. Edited percentages are
placed into ORPG system.
(rms_download_load_shed.c)

(27) EDIT NARROWBAND RECONFIGURATION CONTROL (FAA/RMMS to ORPG) - Request
current narrowband configuration for specified line.
(rms_edit_nb_cfg.c)

(28) NARROWBAND RECONFIGURATION CONTROL (ORPG to FAA/RMMS) - Sends current
narrowband configuration for specified line.
(rms_edit_nb_cfg.c)

(29) DOWNLOAD NARROWBAND RECONFIGURATION CONTROL (FAA/RMMS to ORPG) - Sends
edited narrowband configuration. Edited configuration is placed into ORPG
system.
(rms_download_nb_cfg.c)

(30) EDIT NARROWBAND DIAL-IN CONTROL (FAA/RMMS to ORPG) -  Request current
narrowband dial-in configuration for specified line.
(rms_edit_dial_cfg.c)

(31) NARROWBAND DIAL-IN CONTROL (ORPG to FAA/RMMS) - Sends current narrowband
dial-in configuration for specified line.
(rms_edit_dial_cfg.c)

(32) DOWNLOAD NARROWBAND DIAL-IN CONTROL (FAA/RMMS to ORPG) - Sends edited narrowband
dial-in configuration. Edited dial_in configuration is placed into ORPG system.
(rms_download_dial_cfg.c)

(33) EDIT NARROWBAND AUTHORIZED USER CONTROL (FAA/RMMS to ORPG) - Request
current narrowband user configuration for specified line.
(rms_edit_auth_user.c)

(34) NARROWBAND AUTHORIZED USER	CONTROL (ORPG to FAA/RMMS) - Sends current
current narrowband user configuration for specified line.
(rms_edit_auth_user.c)

(35) DOWNLOAD NARROWBAND AUTHORIZED USER CONTROL (FAA/RMMS to ORPG) - Sends
edited narrowband user configuration. Edited user configuration is placed into
ORPG system.
(rms_download_auth_user.c)

(36) SYSTEM STATUS LOG RECORD MESSAGE (ORPG to FAA/RMMS) - A system status log
record message is sent without any request command from the FAA/RMMS. One record
consists of eighty ASCII characters equivalent to forty halfwords.  Both the
ORPG and RMS logs will reflect the same information with embedded date and time
stamps.
(rms_send_record_log.c)

(37) ACKNOWLEDGMENT MESSAGE (ORPG to FAA/RMMS, FAA/RMMS to ORPG) -
Acknowledgment messages are sent across the interface in response to a command
or status message. All messages sent from the FAA/RMMS to the ORPG result in an
acknowledgment message being sent from the ORPG to the FAA/RMMS. Messages sent
from the ORPG to the FAA/RMMS also result in an acknowledgment being sent back
to the ORPG.  The only message that will not require an acknowledgement message
is an acknowledgement message received from the other system. Each message sent
across the interface has a unique message sequence number, which is repeated in
the corresponding acknowledgment message. This enables the receiving system to
match the acknowledgment to the appropriate message. After transmitting, the
system will buffer the message until an acknowledgment is received. If an
acknowledgment is not received within ten seconds, the message will be
retransmitted three times. If retransmit attempts fail, the interface will be
declared down, and the system will attempt to reinitialize the interface.
(rms_send_ack.c)

(38) RMS INHIBIT MESSAGE (ORPG to FAA/RMMS) - The RMS inhibit is sent to allow
the operator control of the ORPG.  The FAA/RMMS will not be able to issue
commands or poll status on the CDS port for time specified in the command. The
FAA/RMMS will continue to receive state, status, alarm, and status log record
messages during the inhibit time. It is the responsibility of the FAA/RMMS to
remain passive with respect to the CDS port for the requested amount of time.
(rms_inhibit.c)

(39) RMS UP MESSAGE (ORPG to FAA/RMMS, FAA/RMMS to ORPG) - An RMS up message can
be sent from either the FAA/RMMS or the ORPG as an initialization sequence of
the interface. If, during the normal course of operation, either the FAA/RMMS or
the ORPG determines the interface is "down", all pending RMS related I/O will be
cancelled and an RMS up message will be sent. Upon receipt of this message by
either the FAA/RMMS or the ORPG, all RMS related I/O buffers will be cleared and
timers will be reset. The RMS up message is used during operation to
re-establish communication.
(rms_up.c)


NOTE: It is assumed that this command is to be run in a normal ORPG
environment.  It requires the event notification daemon (en_daemon) to be
running prior to invocation.

NOTE: When editing narrowband line information a line number will be required.
The ORPG numbers lines logically beginning with 0, while the FAA/RMMS numbers
lines starting with 1. In order to edit narrowband line 2 the user must enter
line 3 in the FAA/RMMS to select the correct line in ORPG.

SEE ALSO orpg(1) rssd(1) lb(3) rms_message(3) rms_util(3) rms_ptmgr(3)

$Revision: 1.4 $

